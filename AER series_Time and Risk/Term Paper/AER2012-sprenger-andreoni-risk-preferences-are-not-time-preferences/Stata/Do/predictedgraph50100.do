/* predictedgraph50100.do *//* This do file generates three graphics fromt he 50-50 and 100-100 conditions:Graph 1: Graph of the mean consumption levels Graph 2: Graph of the mean consumption levels with predictions from a model assuming one curvature parameterGraph 3: Graph of the mean consumption levels with predictions from a model assuming separate curvature parameters.Graph 3 is Figure 2 in the paper Graph 4: Graph of the mean consumption levels with predictions from a model assuming separate parameters everywhere.Graph 4 is referred to in the paper *//* Graph 1 */twoway (rcap avgcons1hi avgcons1low theta if risk100100 == 1| risk5050 == 1, color(black) sort) (connected avgcons1 theta if risk100100 == 1, color(blue) sort lpattern(dash)) (connected avgcons1 theta if risk5050 == 1, color(red) sort lpattern(dash)) if labnumber==1, legend(order(2 "(p1,p2) = (1,1)" 3 "(p1,p2) = (0.5,0.5)" 1 "+/- 1.96 S.E.") rows(1) size(vsmall)) by(k) ytitle("Mean Earlier Choice ($)")  xtitle("Gross Interest Rate = (1+r)") ylabel(0(5)20, angle(horizontal)) xlabel(1(0.1)1.44) scheme(s1mono)graph export "Figures/commonratio50100.pdf", replace/* Graph 2 *//* Generate One Parameter Prediction (alpha5050 = alpha100100)*/capture drop conshatnl (cons1= (((1 - (({delta=1}^k)*(theta))^(1/({alpha = 0.7} - 1)))*{gamma=1}) + ((({delta=1}^k)*(theta))^(1/({alpha = 0.7} -1 )))*mnumer )      /(1 + irate*(theta*{delta=1}^k)^(1/({alpha=0.7} -1)))) if risk100100 == 1 | risk5050==1, clu(labnumber)predict conshat if risk5050== 1|risk100100 == 1/* Build Graph 2 */twoway (rcap avgcons1hi avgcons1low theta if risk100100 == 1| risk5050 == 1, color(black) sort) (connected avgcons1 theta if risk100100 == 1, color(blue) sort lpattern(dash)) (connected avgcons1 theta if risk5050 == 1, color(red) sort lpattern(dash))  (line conshat theta if risk5050 == 1, color(gray) sort) if labnumber==1, legend(order(2 "(p1,p2) = (1,1)" 3 "(p1,p2) = (0.5,0.5)" 1 "+/- 1.96 S.E." 4 "One Parameter Fit" "R-Squared = .642") rows(2) size(vsmall)) by(k) ytitle("Mean Earlier Choice ($)")  xtitle("Gross Interest Rate = (1+r)") ylabel(0(5)20, angle(horizontal)) xlabel(1(0.1)1.44) scheme(s1mono)graph export "Figures/commonratio50100bad.pdf", replace/* Graph 3 *//* Two Parameter Prediction (alpha5050 != alpha100100) */capture drop conshat2gen conshat2 = conshatcapture drop conshatnl (cons1= (((1 - (({delta=1}^k)*(theta))^(1/({alpha100100 = 0.7} - 1)))*{gamma=1}) + ((({delta=1}^k)*(theta))^(1/({alpha100100 = 0.7} -1 )))*mnumer )      /(1 + irate*(theta*{delta=1}^k)^(1/({alpha100100=0.7} -1)))*risk100100 + (((1 - (({delta=1}^k)*(theta))^(1/({alpha5050 = 0.7} - 1)))*{gamma=1}) + ((({delta=1}^k)*(theta))^(1/({alpha5050 = 0.7} -1 )))*mnumer )      /(1 + irate*(theta*{delta=1}^k)^(1/({alpha5050=0.7} -1)))*risk5050 ) if risk100100 == 1 | risk5050==1, clu(labnumber)predict conshat if risk5050== 1|risk100100 == 1/* Build up separate R-squared */capture drop tss5050egen tss5050 = total(cons1^2) if risk5050 == 1capture drop tss100100egen tss100100 = total(cons1^2) if risk100100 == 1capture drop ssr5050egen ssr5050 = total((cons1-conshat)^2) if risk5050 == 1capture drop ssr100100egen ssr100100 = total((cons1-conshat)^2) if risk100100 == 1capture drop rsq5050gen rsq5050 = (tss5050 - ssr5050)/tss5050capture drop rsq100100gen rsq100100 = (tss100100 - ssr100100)/tss100100/* Build Graph 3*/twoway (rcap avgcons1hi avgcons1low theta if risk100100 == 1| risk5050 == 1, color(black) sort) (connected avgcons1 theta if risk100100 == 1, color(blue) sort lpattern(dash)) (connected avgcons1 theta if risk5050 == 1, color(red) sort lpattern(dash))  (line conshat theta if risk5050 == 1, color(red) sort) (line conshat theta if risk100100 == 1, color(blue) sort) if labnumber==1, legend(order(2 "(p1,p2) = (1,1)" 3 "(p1,p2) = (0.5,0.5)" 1 "+/- 1.96 S.E."   5 "(p1, p2) = (1,1) Fit" "R-Squared = 0.594" 4 "(p1,p2) = (0.5,0.5) Fit" "R-Squared = 0.761") rows(2) size(vsmall)) by(k) ytitle("Mean Earlier Choice ($)")  xtitle("Gross Interest Rate = (1+r)") ylabel(0(5)20, angle(horizontal)) xlabel(1(0.1)1.44) scheme(s1mono)graph export "Figures/commonratio50100good.pdf", replacesu rsq5050 rsq100100twoway (rcap avgcons1hi avgcons1low theta if risk100100 == 1| risk5050 == 1, color(black) sort) (connected avgcons1 theta if risk100100 == 1, color(blue) sort lpattern(dash)) (connected avgcons1 theta if risk5050 == 1, color(red) sort lpattern(dash))  (line conshat theta if risk5050 == 1, color(red) sort) (line conshat theta if risk100100 == 1, color(blue) sort)  (line conshat2 theta if risk5050 == 1, color(gray) sort) if labnumber==1, legend(order(2 "(p1,p2) = (1,1)" 3 "(p1,p2) = (0.5,0.5)" 1 "+/- 1.96 S.E."   5 "(p1, p2) = (1,1) Fit" "R-Squared = 0.594" 4 "(p1,p2) = (0.5,0.5) Fit" "R-Squared = 0.761" 6 "Combined Fit" ) rows(2) size(vsmall)) by(k) ytitle("Mean Earlier Choice ($)")  xtitle("Gross Interest Rate = (1+r)") ylabel(0(5)20, angle(horizontal)) xlabel(1(0.1)1.44) scheme(s1mono)graph export "Figures/commonratio50100app.pdf", replace/* Graph 4 *//* Totally Different Models Column (2) */capture drop conshatnl (cons1= (((1 - (({delta100100=1}^k)*(theta))^(1/({alpha100100 = 0.7} - 1)))*{gamma100100=1}) + ((({delta100100=1}^k)*(theta))^(1/({alpha100100 = 0.7} -1 )))*mnumer )      /(1 + irate*(theta*{delta100100=1}^k)^(1/({alpha100100=0.7} -1)))*risk100100 + (((1 - (({delta5050=1}^k)*(theta))^(1/({alpha5050 = 0.7} - 1)))*{gamma5050=1}) + ((({delta5050=1}^k)*(theta))^(1/({alpha5050 = 0.7} -1 )))*mnumer )      /(1 + irate*(theta*{delta5050=1}^k)^(1/({alpha5050=0.7} -1)))*(risk5050) ) if risk100100 == 1 | risk5050==1 , clu(labnumber)predict conshat if risk5050== 1|risk100100 == 1/* Build up separate R-squared */capture drop tss5050egen tss5050 = total(cons1^2) if risk5050 == 1capture drop tss100100egen tss100100 = total(cons1^2) if risk100100 == 1capture drop ssr5050egen ssr5050 = total((cons1-conshat)^2) if risk5050 == 1capture drop ssr100100egen ssr100100 = total((cons1-conshat)^2) if risk100100 == 1capture drop rsq5050gen rsq5050 = (tss5050 - ssr5050)/tss5050capture drop rsq100100gen rsq100100 = (tss100100 - ssr100100)/tss100100/* Build Graph 4*/twoway (rcap avgcons1hi avgcons1low theta if risk100100 == 1| risk5050 == 1, color(black) sort) (connected avgcons1 theta if risk100100 == 1, color(blue) sort lpattern(dash)) (connected avgcons1 theta if risk5050 == 1, color(red) sort lpattern(dash))  (line conshat theta if risk5050 == 1, color(red) sort) (line conshat theta if risk100100 == 1, color(blue) sort) if labnumber==1, legend(order(2 "(p1,p2) = (1,1)" 3 "(p1,p2) = (0.5,0.5)" 1 "+/- 1.96 S.E."   5 "(p1, p2) = (1,1) Fit" "R-Squared = 0.595" 4 "(p1,p2) = (0.5,0.5) Fit" "R-Squared = 0.766") rows(2) size(vsmall)) by(k) ytitle("Mean Earlier Choice ($)")  xtitle("Gross Interest Rate = (1+r)") ylabel(0(5)20, angle(horizontal)) xlabel(1(0.1)1.44) scheme(s1mono)graph export "Figures/commonratio50100goodFullModel.pdf", replacesu rsq5050 rsq100100/* Wrong out of sample 1: Use 50-50 to predict 100-100*/capture drop conshatnl (cons1=  (((1 - (({delta5050=1}^k)*(theta))^(1/({alpha5050 = 0.7} - 1)))*{gamma5050=1}) + ((({delta5050=1}^k)*(theta))^(1/({alpha5050 = 0.7} -1 )))*mnumer )      /(1 + irate*(theta*{delta5050=1}^k)^(1/({alpha5050=0.7} -1))) ) if  risk5050==1 , clu(labnumber)predict conshat if risk100100 == 1capture drop tss100100egen tss100100 = total(cons1^2) if risk100100 == 1capture drop ssr100100egen ssr100100 = total((cons1-conshat)^2) if risk100100 == 1capture drop rsq100100gen rsq100100 = (tss100100 - ssr100100)/tss100100 if risk100100==1/* Wrong out of sample 2: Use 100-100 to predict 50-50*/capture drop conshatnl (cons1=  (((1 - (({delta5050=1}^k)*(theta))^(1/({alpha5050 = 0.7} - 1)))*{gamma5050=1}) + ((({delta5050=1}^k)*(theta))^(1/({alpha5050 = 0.7} -1 )))*mnumer )      /(1 + irate*(theta*{delta5050=1}^k)^(1/({alpha5050=0.7} -1))) ) if  risk100100==1 , clu(labnumber)predict conshat if risk5050 == 1capture drop tss5050egen tss5050 = total(cons1^2) if risk5050 == 1capture drop ssr5050egen ssr5050 = total((cons1-conshat)^2) if risk5050 == 1capture drop rsq5050gen rsq5050 = (tss5050 - ssr5050)/tss5050 if risk5050 == 1su rsq100100 rsq5050